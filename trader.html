<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trader Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100">
  <div class="flex">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-900 text-white h-screen p-5">
      <h1 class="text-2xl font-bold mb-5">Trader Panel</h1>
      <nav>
        <a href="final.html" class="block py-2 px-4 hover:bg-gray-700">Dashboard</a>
        <a href="#trade" class="block py-2 px-4 hover:bg-gray-700">Place Trade</a>
        <a href="#history" class="block py-2 px-4 hover:bg-gray-700">Transaction History</a>
        <a href="#market" class="block py-2 px-4 hover:bg-gray-700">Market Analysis</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-10">
      <header class="bg-yellow-500 text-white p-5 rounded-lg text-center text-2xl">
        Trader Dashboard
        <p class="text-sm mt-2">
          <strong>Username:</strong> <span id="username"></span>
        </p>
      </header>

      <div class="mt-5 bg-white p-5 rounded-lg shadow text-center">
        <h2 class="text-lg font-semibold">Current Balance: <span id="balance">$1000</span></h2>
      </div>

      <div class="grid grid-cols-3 gap-4 mt-5">
        <div class="bg-white p-5 rounded-lg shadow">
          <h3 class="text-lg font-semibold">Buy Stocks</h3>
          <button onclick="buyStock()" class="mt-3 bg-green-500 text-white py-2 px-4 rounded">Buy</button>
        </div>
        <div class="bg-white p-5 rounded-lg shadow">
          <h3 class="text-lg font-semibold">Sell Stocks</h3>
          <button onclick="sellStock()" class="mt-3 bg-red-500 text-white py-2 px-4 rounded">Sell</button>
        </div>
        <div class="bg-white p-5 rounded-lg shadow">
          <h3 class="text-lg font-semibold">View Market Trends</h3>
          <button onclick="viewMarketTrends()" class="mt-3 bg-blue-500 text-white py-2 px-4 rounded">View</button>
        </div>
        <div class="bg-white p-5 rounded-lg shadow">
  <h3 class="text-lg font-semibold">Track Portfolio</h3>
  <a href="stonkinfo.html" class="mt-3 inline-block bg-indigo-500 text-white py-2 px-4 rounded">Track</a>
</div>

        <div class="bg-white p-5 rounded-lg shadow">
          <h3 class="text-lg font-semibold">Check Trade History</h3>
          <button onclick="checkTradeHistory()" class="mt-3 bg-gray-500 text-white py-2 px-4 rounded">Check</button>
        </div>
        <div class="bg-white p-5 rounded-lg shadow">
          <h3 class="text-lg font-semibold">Cancel Order</h3>
          <button onclick="cancelOrder()" class="mt-3 bg-yellow-500 text-white py-2 px-4 rounded">Cancel</button>
        </div>
      </div>

      <!-- Logout Button -->
      <button class="mt-10 bg-red-500 text-white py-2 px-4 rounded" onclick="logout()">Logout</button>
    </main>
  </div>

  <script>
    // Retrieve logged-in user
    const loggedInUser = localStorage.getItem("loggedInUser");

    if (loggedInUser) {
      const userDataString = localStorage.getItem(loggedInUser);
      console.log("User Data Retrieved:", userDataString);

      if (userDataString) {
        const userData = JSON.parse(userDataString);

        if (userData.username) {
          document.getElementById("username").innerText = userData.username;
        } else {
          alert("User data missing. Please log in again.");
          localStorage.removeItem("loggedInUser");
          window.location.href = "index.html";
        }
      } else {
        alert("User data not found. Please log in again.");
        localStorage.removeItem("loggedInUser");
        window.location.href = "index.html";
      }
    } else {
      alert("You are not logged in.");
      window.location.href = "index.html";
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "index.html";
    }

    function buyStock() {
      alert("You have placed a buy order!");
    }

    function sellStock() {
      alert("You have placed a sell order!");
    }

    function viewMarketTrends() {
      alert("Displaying market trends...");
    }

    function viewPortfolio() {
      alert("Fetching your portfolio details...");
    }

    function checkTradeHistory() {
      alert("Displaying trade history...");
    }

    function cancelOrder() {
      alert("Your order has been canceled.");
    }
  </script>
</body>
</html>
